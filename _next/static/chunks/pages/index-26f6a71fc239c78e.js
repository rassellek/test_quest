(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5298)}])},5298:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(5893),i=n(1857),s=n.n(i),o=n(9008),a=n.n(o),l=n(7160),d=n.n(l),c=n(7294),x=n(9965),u=n(5302),b=n(6713),f=n(4359),p=n(7511),m=n(4627),h=n(9068);n(3047);var y=n(1777),g=n(5968),k=n(6226),w=n(3411),_=n(8945),j=n(9611),v=n(7213),C=n(9647),S=n(9531),Z=n(4749),z=n(8795);let{Text:I,Link:O}=x.Z,{useBreakpoint:P}=u.ZP;function L(e){_.Z.defaults.baseURL="https://example.com/api";let t=P(),n=t.lg,{columns:i,pageSize:o=30,formatting:a,altUrl:l,type:d,filters:x=!1,setFilters:u=()=>{},tab:L,dates:N,isFavorites:D=!1}=e,[T,U]=(0,c.useState)([]),E=l||"/".concat(d,"/all"),[H,M]=(0,c.useState)(E),[R,F]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[J,K]=(0,c.useState)({}),[V,X]=(0,c.useState)({}),[Y,G]=(0,c.useState)([]);(0,c.useEffect)(()=>{!1===x?(K({}),X({}),M(E)):Array.isArray(x)&&x.hasOwnProperty(2)&&(x[0].hasOwnProperty("false")||K(x[0]),X(x[1]),Q(null,x[0],x[1]))},[x]);let Q=(e,t,n)=>{K(t),X(n);let r=!1;for(let e in t)t[e]&&(r={filter:t[e]});!1===r?n.columnKey&&n.order?(M("/".concat(d,"/sort?field=")+n.columnKey+"&asc="+("ascend"==n.order?"1":"0")),u([t,n])):u(!1):u([t,n])},[W,q]=(0,c.useState)(1),[$,ee]=(0,c.useState)(o),et=e=>{let t=Math.floor(T.length/$)+1;if(e<=t&&t-e<=1){let e=new URL(_.Z.defaults.baseURL+H);e.searchParams.set("limit",10*$/2),e.searchParams.set("offset",t*$),M(e.pathname+e.search)}q(e)},en=function(){let e=[];if("object"==typeof i)for(let t of i){e.push({...t,title:t.title+(t.hasOwnProperty("suffix")?", "+t.suffix:""),dataIndex:t.key,ellipsis:!t.hasOwnProperty("ellipsis")||t.ellipsis,width:t.hasOwnProperty("width")?t.width:250,align:t.isCount?"right":"left",...t.fixed&&{fixed:!!n&&t.fixed},defaultSortOrder:"descend",sorter:!!t.hasOwnProperty("sorter")&&((e,n)=>e[t.key]-n[t.key]),sortOrder:t.hasOwnProperty("sorter")&&V.columnKey===t.key?V.order:null,sortDirections:["descend","ascend"]}),t.search&&(e[e.length-1]={...e[e.length-1],filteredValue:J.name||null,...function(e,t,n,i,s,o){let[a,l]=(0,c.useState)(""),d=(0,c.useRef)(null),x=(n,r,i)=>{r(),o(n),1!=e&&t("/".concat(e,"/by_").concat(i,"?").concat(i,"=").concat(a))};return{filterDropdown:o=>{let{setSelectedKeys:a,selectedKeys:c,confirm:u,clearFilters:f}=o;return(0,r.jsxs)("div",{style:{padding:8},children:[(0,r.jsx)(S.Z,{ref:d,placeholder:"Найти по ".concat(i),value:c[s],onChange:e=>{a(e.target.value?[e.target.value]:[]),l(e.target.value)},onPressEnter:()=>x(c,u,s,a),style:{marginBottom:8,display:"block"}}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(Z.ZP,{type:"primary",onClick:()=>x(c,u,s),icon:(0,r.jsx)(z.Z,{}),size:"small",style:{width:90},children:"Найти"}),(0,r.jsx)(Z.ZP,{onClick:()=>{a([]),f(),u({closeDropdown:!1}),1!=e&&t(n)},size:"small",style:{width:90},children:"Сбросить"})]})]})},filterIcon:e=>(0,r.jsx)(h.Z,{title:"Поиск",children:(0,r.jsx)(z.Z,{style:{color:e?"#1890ff":void 0}})}),onFilter:1==e&&((e,t)=>"object"!=typeof t[s]?t[s].toString().toLowerCase().indexOf(e.toLowerCase())>-1:"name"in t[s]?t[s].name.toString().toLowerCase().indexOf(e.toLowerCase())>-1:void 0),onFilterDropdownOpenChange:e=>{e&&setTimeout(()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.select()},100)}}}(L?1:d,M,E,t.title,t.key,e=>u([e,x[1]]))});let i=t.hasOwnProperty("render")?t.render:e=>String(e)?e:"";t.isCount&&"id"!=t.key&&(i=e=>Number.isInteger(e)?e.toLocaleString():e),"trend"==t.type?i=e=>e>0?(0,r.jsxs)(I,{type:"success",children:["+",e,"%"]}):e<0?(0,r.jsxs)(I,{type:"danger",children:["-",e,"%"]}):(0,r.jsx)(I,{children:e?e+" %":""}):"link"==t.type&&t.link?i=e=>(0,r.jsx)(O,{href:e?"/wb/".concat(t.link,"/")+e.id:"",children:"object"==typeof e&&e.hasOwnProperty("name")?e.name:""}):"rating"==t.type&&(i=e=>Number.isInteger(e)?e.toFixed(1):""),e[e.length-1]={...e[e.length-1],render:i}}for(let t=0;t<i.length;t++)"title"==i[t].type&&(e[t].render=(t,n,s)=>{let o=t.src&&(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(f.Z,{src:t.src("big"),preview:!1,height:"50vh"}),(0,r.jsx)(p.Z,{size:"small",column:1,style:{maxWidth:400,marginLeft:16},children:n&&e.map((e,t)=>{if(0!=t)return e&&(0,r.jsxs)(p.Z.Item,{label:e&&i[t].title,children:[e.render(n[e.dataIndex]),e.suffix?" "+e.suffix:""]})})})]});return(0,r.jsxs)("div",{style:{marginTop:-8},children:[t.src&&(0,r.jsx)(m.Z,{content:o,placement:"right",title:t.name,children:(0,r.jsx)(f.Z,{src:t.src("tm"),preview:{src:t.src("big"),mask:(0,r.jsx)(j.Z,{})},height:40})}),(0,r.jsx)(h.Z,{title:t.name,children:(0,r.jsx)(O,{href:t?"/wb/".concat(L||d,"/")+t.id:"",style:{marginLeft:10},children:t.name})})]})});return e}();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{id:"b683bc553b66592b",children:".ant-table.ant-table-bordered.jsx-b683bc553b66592b>.ant-table-footer.jsx-b683bc553b66592b{position:-webkit-sticky;position:sticky;z-index:2;left:0px;bottom:0px;height:80px;row-gap:16px}"}),(0,r.jsx)(y.Z,{...e,columns:en,style:{...e.style,marginRight:20,marginLeft:20},bordered:!0,scroll:{x:"98vw"},size:"small",sticky:{offsetScroll:70},onChange:Q,rowSelection:{type:"checkbox",selectedRowKeys:Y,onChange:function(e){G(e)},renderCell:(e,t,n,i)=>D?e?(0,r.jsx)(C.Z,{onClick:i.props.onChange}):(0,r.jsx)(v.Z,{twoToneColor:"#eb2f96",onClick:i.props.onChange}):e?(0,r.jsx)(v.Z,{twoToneColor:"#eb2f96",onClick:i.props.onChange}):(0,r.jsx)(C.Z,{onClick:i.props.onChange})},pagination:!1,footer:()=>(0,r.jsx)(g.Z,{gutter:[16,16],justify:"space-between",align:"middle",style:{width:"95%",position:"absolute",left:0,bottom:0,height:80,marginLeft:16},children:(0,r.jsx)(k.Z,{children:(0,r.jsx)(w.Z,{onChange:et,total:T.length,current:W,showSizeChanger:!1,pageSize:$,responsive:!0,style:{zIndex:10}})})})})]})}var N=n(4663);function D(e){return e.data.data.map(e=>({...e,name:{id:e.id,name:e.item_name,src:getImageUrl(e.id)}}))}class T extends c.Component{render(e){return(0,r.jsx)("div",{className:d().table,children:(0,r.jsx)(N.Z.DragColumn,{...this.dragProps,children:(0,r.jsx)(L,{columns:this.state.columns,dataSource:this.state.data,formatting:D,type:"items",...e})})})}constructor(e){super(e),this.state={data:[{key:0,name:"Карты торо",id:18427716,price:21340,orders_count_period:105,revenue_period:2240700,revenue:268884e3,revenue_trand:"",lost_revenue:"",seller:"Тара ООО",brand:"",orders_count:"",stocks:"",rating:"",feedbacks:"",add_date:new Date("25 January 2023 14:48 UTC")},{key:1,name:"Спрей сывортка",id:7052045,price:2775,orders_count_period:74,revenue_period:205350,revenue:2775e5,revenue_trand:"",lost_revenue:"",seller:"ООО ДАЛЬБА",brand:"",orders_count:"",stocks:"",rating:"",feedbacks:"",add_date:new Date("25 January 2023 14:48 UTC")},{key:2,name:"Свечи для торта",id:8240886,price:99e3,orders_count_period:0,revenue_period:0,revenue:2574e5,revenue_trand:"",lost_revenue:"",seller:"Ангельчев Руслан",brand:"",orders_count:"",stocks:"",rating:"",feedbacks:"",add_date:new Date("25 January 2023 14:48 UTC")}],columns:[{title:"Название",dataIndex:"name",key:"name",search:!0,type:"title",fixed:"left",type:String},{title:"Артикул",dataIndex:"id",key:"id",search:!0,isCount:!0,width:100},{title:"Цена",suffix:"руб",dataIndex:"price",key:"price",type:"price",sorter:!0,isCount:!0,width:100},{title:"Продажи",suffix:"шт",dataIndex:"orders_count_period",key:"orders_count_period",sorter:!0,isCount:!0,width:130},{title:"Выручка за период",suffix:"руб",dataIndex:"revenue_period",key:"revenue_period",sorter:!0,isCount:!0,width:200},{title:"Выручка",suffix:"руб",dataIndex:"revenue",key:"revenue",sorter:!0,isCount:!0,width:130},{title:"Тренд выручки",dataIndex:"revenue_trand",key:"revenue_trand",type:"trend",sorter:!0,align:"right",width:140},{title:"Упущенная выручка",dataIndex:"lost revenue",key:"lost revenue",sorter:!0,isCount:!0,width:170},{title:"Продавец",dataIndex:"seller",key:"seller",type:"link",link:"sellers",search:!0,width:200,type:String},{title:"Бренд",dataIndex:"brand",key:"brand",type:"link",link:"brands",search:!0,width:180},{title:"Продажи за все время",suffix:"шт",dataIndex:"orders_count",key:"orders_count",isCount:!0,sorter:!0,width:210},{title:"Наличие",suffix:"шт",dataIndex:"stocks",key:"stocks",isCount:!0,sorter:!0,width:130},{title:"Рейтинг",dataIndex:"rating",key:"rating",type:"rating",sorter:!0,width:100},{title:"Отзывов",suffix:"шт",dataIndex:"feedbacks",key:"feedbacks",isCount:!0,sorter:!0,width:120},{title:"Дата обнаружения товара",dataIndex:"add_date",key:"add_date",render:e=>new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"numeric",day:"numeric"}),sorter:!0,width:120,type:Date}]};let t=this;this.dragProps={onDragEnd(e,n){let r=[...t.state.columns],i=r.splice(e-1,1)[0];r.splice(n-1,0,i),t.setState({columns:r})},nodeSelector:"th"}}}function U(){return(0,r.jsxs)("div",{className:"jsx-633997e2c16d84bd "+(d().container||""),children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{className:"jsx-633997e2c16d84bd",children:"Create Next App"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico",className:"jsx-633997e2c16d84bd"})]}),(0,r.jsx)("main",{className:"jsx-633997e2c16d84bd",children:(0,r.jsx)("div",{className:"jsx-633997e2c16d84bd "+(d().grid||""),children:(0,r.jsx)(T,{})})}),(0,r.jsx)(s(),{id:"3c366c76dd7b579b",children:"main.jsx-633997e2c16d84bd{padding:1rem 0;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:95vw}footer.jsx-633997e2c16d84bd{width:100%;height:100px;border-top:1px solid#eaeaea;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}footer.jsx-633997e2c16d84bd img.jsx-633997e2c16d84bd{margin-left:.5rem}footer.jsx-633997e2c16d84bd a.jsx-633997e2c16d84bd{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;text-decoration:none;color:inherit}code.jsx-633997e2c16d84bd{background:#fafafa;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;padding:.75rem;font-size:1.1rem;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace}"}),(0,r.jsx)(s(),{id:"b0cffc484a2fa82a",children:"html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}"})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",title:"Home_title__T09hD",description:"Home_description__41Owk",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb",table:"Home_table__YBAdZ"}}},function(e){e.O(0,[774,693,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);